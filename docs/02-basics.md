# ç¬¬äºŒç« ï¼šåŸºæœ¬èªæ³•èˆ‡å‹åˆ¥ç³»çµ±

## è®Šæ•¸å®£å‘Š

### JS vs Rust è®Šæ•¸å°ç…§

```javascript
// JavaScript
let x = 5;        // å¯è®Š
const y = 10;     // ä¸å¯è®Š
var z = 15;       // é¿å…ä½¿ç”¨
```

```rust
// Rust
let x = 5;        // ä¸å¯è®Šï¼ˆé è¨­ï¼ï¼‰
let mut y = 10;   // å¯è®Šï¼ˆéœ€è¦ mutï¼‰
const Z: i32 = 15; // ç·¨è­¯æ™‚å¸¸æ•¸
```

### é‡é»å·®ç•°

| æ¦‚å¿µ | JavaScript | Rust |
|------|------------|------|
| é è¨­è¡Œç‚º | `let` å¯è®Š | `let` ä¸å¯è®Š |
| å¯è®Šè®Šæ•¸ | `let` | `let mut` |
| å¸¸æ•¸ | `const`ï¼ˆåŸ·è¡Œæ™‚ï¼‰ | `const`ï¼ˆç·¨è­¯æ™‚ï¼Œéœ€å‹åˆ¥ï¼‰ |

### è®Šæ•¸é®è”½ï¼ˆShadowingï¼‰

Rust å…è¨±é‡æ–°å®£å‘ŠåŒåè®Šæ•¸ï¼Œé€™åœ¨ JS çš„åŒä¸€ä½œç”¨åŸŸæ˜¯ä¸è¡Œçš„ï¼š

```rust
let x = 5;
let x = x + 1;      // OKï¼é€™æ˜¯æ–°çš„ x
let x = "hello";    // OKï¼ç”šè‡³å¯ä»¥æ”¹è®Šå‹åˆ¥

// é€™å¾ˆå¯¦ç”¨ï¼Œä¾‹å¦‚å‹åˆ¥è½‰æ›ï¼š
let input = "42";
let input: i32 = input.parse().unwrap();  // å­—ä¸²è½‰æ•¸å­—
```

## åŸºæœ¬å‹åˆ¥

### æ•¸å­—å‹åˆ¥

Rust çš„æ•¸å­—å‹åˆ¥éå¸¸æ˜ç¢ºï¼ˆä¸åƒ JS åªæœ‰ Numberï¼‰ï¼š

```rust
// æ•´æ•¸ï¼ˆæœ‰æ­£è² è™Ÿï¼‰
let a: i8 = 127;       // -128 åˆ° 127
let b: i16 = 32767;
let c: i32 = 2147483647;  // é è¨­æ•´æ•¸å‹åˆ¥
let d: i64 = 9223372036854775807;
let e: i128 = 170141183460469231731687303715884105727;

// æ•´æ•¸ï¼ˆç„¡æ­£è² è™Ÿï¼‰
let f: u8 = 255;       // 0 åˆ° 255
let g: u32 = 4294967295;
let h: usize = 100;    // æŒ‡æ¨™å¤§å°ï¼Œç”¨æ–¼ç´¢å¼•

// æµ®é»æ•¸
let i: f32 = 3.14;
let j: f64 = 3.141592653589793;  // é è¨­æµ®é»å‹åˆ¥
```

### å‹åˆ¥æ¨å°

Rust å¾ˆè°æ˜ï¼Œå¤§å¤šæ•¸æ™‚å€™ä¸éœ€è¦å¯«å‹åˆ¥ï¼š

```rust
let x = 42;        // æ¨å°ç‚º i32
let y = 3.14;      // æ¨å°ç‚º f64
let z = true;      // æ¨å°ç‚º bool
let s = "hello";   // æ¨å°ç‚º &str
```

### å­—ä¸²ï¼š&str vs String

é€™æ˜¯ JS å·¥ç¨‹å¸«å¸¸å›°æƒ‘çš„åœ°æ–¹ï¼š

```rust
// &str - å­—ä¸²åˆ‡ç‰‡ï¼ˆä¸å¯è®Šï¼Œå­˜åœ¨è¨˜æ†¶é«”æŸè™•ï¼‰
let s1: &str = "Hello";  // å­—é¢å€¼ï¼Œç·¨è­¯é€²ç¨‹å¼

// String - å­—ä¸²ç‰©ä»¶ï¼ˆå¯è®Šï¼Œå­˜åœ¨å †ç©ä¸Šï¼‰
let s2: String = String::from("Hello");
let mut s3 = String::new();
s3.push_str("Hello");
```

**ç°¡å–®è¨˜æ³•**ï¼š
- `&str`ï¼šé¡ä¼¼ JS çš„å­—ä¸²å­—é¢å€¼ `"hello"`
- `String`ï¼šé¡ä¼¼ JS çš„ `new String("hello")` ä½†æ›´å¸¸ç”¨

```rust
// è½‰æ›æ–¹å¼
let str_slice: &str = "hello";
let string: String = str_slice.to_string();  // &str -> String
let string: String = String::from("hello");  // å¦ä¸€ç¨®æ–¹å¼
let back_to_slice: &str = &string;           // String -> &str
```

### å¸ƒæ—èˆ‡å­—å…ƒ

```rust
let t: bool = true;
let f: bool = false;

let c: char = 'A';      // æ³¨æ„ï¼šå–®å¼•è™Ÿ
let emoji: char = 'ğŸ˜€';  // æ”¯æ´ Unicode
```

## å‡½å¼å®šç¾©

```javascript
// JavaScript
function add(a, b) {
    return a + b;
}

const multiply = (a, b) => a * b;
```

```rust
// Rust
fn add(a: i32, b: i32) -> i32 {
    a + b  // æ²’æœ‰åˆ†è™Ÿ = å›å‚³å€¼
}

// æˆ–æ˜ç¢º return
fn multiply(a: i32, b: i32) -> i32 {
    return a * b;  // æœ‰åˆ†è™Ÿ
}

// ç„¡å›å‚³å€¼
fn greet(name: &str) {
    println!("Hello, {}!", name);
}
```

### é‡è¦è§€å¿µï¼šè¡¨é”å¼ vs é™³è¿°å¼

```rust
fn example() -> i32 {
    let x = 5;      // é™³è¿°å¼ï¼ˆæœ‰åˆ†è™Ÿï¼Œç„¡å€¼ï¼‰

    x + 1           // è¡¨é”å¼ï¼ˆç„¡åˆ†è™Ÿï¼Œæœ‰å€¼ï¼‰â†’ é€™æ˜¯å›å‚³å€¼
}

// éŒ¯èª¤ç¤ºç¯„
fn wrong() -> i32 {
    let x = 5;
    x + 1;          // åŠ äº†åˆ†è™Ÿè®Šæˆé™³è¿°å¼ï¼Œå›å‚³ ()
}
```

## æ§åˆ¶æµç¨‹

### if è¡¨é”å¼

```rust
// åŸºæœ¬ç”¨æ³•
let number = 6;

if number % 2 == 0 {
    println!("å¶æ•¸");
} else {
    println!("å¥‡æ•¸");
}

// if æ˜¯è¡¨é”å¼ï¼å¯ä»¥è³¦å€¼ï¼ˆé¡ä¼¼ JS çš„ä¸‰å…ƒé‹ç®—å­ï¼‰
let result = if number > 5 { "å¤§" } else { "å°" };
```

æ³¨æ„ï¼šRust çš„ if æ¢ä»¶ä¸éœ€è¦æ‹¬è™Ÿï¼Œä½†**å¿…é ˆæ˜¯å¸ƒæ—å€¼**ï¼š

```rust
// JavaScript å¯ä»¥
if (1) { console.log("truthy"); }

// Rust ä¸è¡Œï¼
if 1 { println!("éŒ¯èª¤ï¼"); }  // ç·¨è­¯éŒ¯èª¤
if 1 != 0 { println!("æ­£ç¢º"); }  // å¿…é ˆæ˜¯ bool
```

### è¿´åœˆ

```rust
// loop - ç„¡é™è¿´åœˆ
let mut count = 0;
let result = loop {
    count += 1;
    if count == 10 {
        break count * 2;  // break å¯ä»¥å›å‚³å€¼ï¼
    }
};

// while
let mut n = 3;
while n != 0 {
    println!("{}", n);
    n -= 1;
}

// for - æœ€å¸¸ç”¨
for i in 0..5 {           // 0, 1, 2, 3, 4
    println!("{}", i);
}

for i in 0..=5 {          // 0, 1, 2, 3, 4, 5ï¼ˆåŒ…å«çµå°¾ï¼‰
    println!("{}", i);
}

// éæ­·é™£åˆ—
let arr = [10, 20, 30];
for element in arr {
    println!("{}", element);
}
```

### match è¡¨é”å¼ï¼ˆè¶…å¼·çš„ switchï¼‰

```rust
let number = 3;

match number {
    1 => println!("ä¸€"),
    2 => println!("äºŒ"),
    3 => println!("ä¸‰"),
    4 | 5 => println!("å››æˆ–äº”"),  // å¤šå€‹å€¼
    6..=10 => println!("å…­åˆ°å"), // ç¯„åœ
    _ => println!("å…¶ä»–"),        // é è¨­ï¼ˆé¡ä¼¼ defaultï¼‰
}

// match ä¹Ÿæ˜¯è¡¨é”å¼
let result = match number {
    1 => "one",
    2 => "two",
    _ => "other",
};
```

## JS vs Rust èªæ³•å°ç…§è¡¨

| åŠŸèƒ½ | JavaScript | Rust |
|------|------------|------|
| è®Šæ•¸ï¼ˆå¯è®Šï¼‰ | `let x = 1` | `let mut x = 1` |
| è®Šæ•¸ï¼ˆä¸å¯è®Šï¼‰ | `const x = 1` | `let x = 1` |
| å‡½å¼ | `function f(a) {}` | `fn f(a: i32) {}` |
| ç®­é ­å‡½å¼ | `(a) => a + 1` | `\|a\| a + 1`ï¼ˆé–‰åŒ…ï¼‰ |
| å­—ä¸²æ¨¡æ¿ | `` `Hello ${name}` `` | `format!("Hello {}", name)` |
| å°å‡º | `console.log(x)` | `println!("{}", x)` |
| é™£åˆ— | `[1, 2, 3]` | `[1, 2, 3]`ï¼ˆå›ºå®šï¼‰æˆ– `vec![1,2,3]` |
| ç‰©ä»¶ | `{ a: 1, b: 2 }` | `struct` æˆ– `HashMap` |
| ç©ºå€¼ | `null / undefined` | `Option<T>` |
| ä¸‰å…ƒé‹ç®— | `a ? b : c` | `if a { b } else { c }` |
| å‹åˆ¥æª¢æŸ¥ | `typeof x` | ç·¨è­¯æ™‚ç¢ºå®šï¼Œç„¡éœ€æª¢æŸ¥ |

## ç·´ç¿’é¡Œ

### ç·´ç¿’ 1ï¼šè®Šæ•¸èˆ‡å‹åˆ¥
```rust
fn main() {
    // 1. å®£å‘Šä¸€å€‹å¯è®Šçš„æ•´æ•¸è®Šæ•¸ countï¼Œåˆå§‹å€¼ç‚º 0
    // 2. å°‡ count åŠ  1
    // 3. å°å‡º count

    // ä½ çš„ç¨‹å¼ç¢¼
}
```

### ç·´ç¿’ 2ï¼šå‡½å¼
```rust
// å®Œæˆé€™å€‹å‡½å¼ï¼šè¨ˆç®—å…©æ•¸çš„å¹³å‡å€¼
fn average(a: f64, b: f64) -> f64 {
    // ä½ çš„ç¨‹å¼ç¢¼
}

fn main() {
    let result = average(10.0, 20.0);
    println!("å¹³å‡å€¼: {}", result);  // æ‡‰è©²å°å‡º 15.0
}
```

### ç·´ç¿’ 3ï¼šmatch ç·´ç¿’
```rust
// å®Œæˆé€™å€‹å‡½å¼ï¼šæ ¹æ“šåˆ†æ•¸å›å‚³ç­‰ç´š
// 90-100: "A", 80-89: "B", 70-79: "C", 60-69: "D", å…¶ä»–: "F"
fn grade(score: i32) -> &'static str {
    // ä½ çš„ç¨‹å¼ç¢¼ï¼ˆä½¿ç”¨ matchï¼‰
}
```

### ç·´ç¿’ 4ï¼šFizzBuzz
ç”¨ Rust å¯¦ä½œç¶“å…¸çš„ FizzBuzzï¼š
- å°å‡º 1 åˆ° 30
- 3 çš„å€æ•¸å° "Fizz"
- 5 çš„å€æ•¸å° "Buzz"
- 15 çš„å€æ•¸å° "FizzBuzz"

---

[â† ä¸Šä¸€ç« ï¼šç’°å¢ƒè¨­å®š](./01-getting-started.md) | [ä¸‹ä¸€ç« ï¼šæ‰€æœ‰æ¬Šèˆ‡å€Ÿç”¨ â†’](./03-ownership.md)
